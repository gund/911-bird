!function(t){var i={};function s(e){if(i[e])return i[e].exports;var h=i[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,s),h.l=!0,h.exports}s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var h in t)s.d(e,h,function(i){return t[i]}.bind(null,h));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=0)}([function(t,i,s){"use strict";s.r(i);class e{constructor(t){this.color=t,this.x=0,this.y=0,this.yAcc=0,this.rotation=0,this.rotationAcc=0}jump(){this.yAcc=-1.5}tick(t){this.x=t.width*e.xPos,this.yAcc+=t.G,this.rotationAcc=this.yAcc<0?this.rotationAcc-e.ANGLE_ACC:this.rotationAcc+e.ANGLE_ACC,this.y+=this.yAcc,this.rotation+=this.rotationAcc,this.rotationAcc>e.ROTATION_ACC_LIM&&(this.rotationAcc=e.ROTATION_ACC_LIM),this.rotationAcc<-e.ROTATION_ACC_LIM&&(this.rotationAcc=-e.ROTATION_ACC_LIM),this.rotation>e.ROTATION_LIM&&(this.rotation=e.ROTATION_LIM,this.rotationAcc=0),this.rotation<-e.ROTATION_LIM&&(this.rotation=-e.ROTATION_LIM,this.rotationAcc=0),this.yAcc>20&&(this.yAcc=20),this.y+e.height<=0&&(this.y=-e.height),this.y+e.height>=t.height&&(this.y=t.height-e.height,this.yAcc=0)}render(t){t.ctx.save(),t.ctx.fillStyle=this.color,t.ctx.translate(this.x+e.halfWidth,this.y+e.halfHeight),t.ctx.rotate(this.rotation),t.ctx.fillRect(-e.halfWidth,-e.halfHeight,e.width,e.height),t.ctx.restore()}}function h(t,i){return t+Math.floor(Math.random()*(i-t+1))}e.width=128,e.halfWidth=e.width/2,e.height=50,e.halfHeight=e.height/2,e.xPos=.2,e.ANGLE_ACC=.001,e.ROTATION_ACC_LIM=.1,e.ROTATION_LIM=.3;class r{constructor(t,i,s){this.x=t,this.topH=i,this.color=s,this.width=h(70,120),this.halfWidth=this.width/2,this.speed=2,this.lastLvl=0}gone(){return this.x+this.halfWidth<=0}setSpeed(t){this.speed=t}tick(t){this.x-=this.speed}render(t){t.ctx.fillStyle=this.color;const i=this.x-this.halfWidth,s=this.topH+r.holeHeight,e=t.height-s;t.ctx.fillRect(i,0,this.width,this.topH),t.ctx.fillRect(i,s,this.width,e)}}r.holeHeight=150;class o{constructor(t){this.color=t,this.ticks=0,this.pipes=[],this.lastLvl=0,this.speed=1}addPipe(){const t=this.getNewTopH(),i=.1*this.width;this.pipes.push(new r(this.width+i,t,this.color))}tick(t){this.width=t.width,this.height=t.height,0===this.ticks&&this.addPipe(),this.lastLvl!==t.lvl&&(this.speed+=o.SPEED_STEP,this.lastLvl=t.lvl),this.ticks+=this.speed,this.ticks>=300&&(this.ticks=0);for(const i of this.pipes)i.setSpeed(this.speed),i.tick(t),i.gone()&&this.pipes.splice(this.pipes.indexOf(i),1)}render(t){for(const i of this.pipes)i.render(t)}getNewTopH(){const t=.2*this.height;let i=0;do{i=h(t,this.height/2)}while(Math.abs(i-this.lastTopH)>50);return this.lastTopH=i}}o.SPEED_STEP=.2;class c{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}setSize(t,i){this.width=t,this.height=i,this.canvas.width=t,this.canvas.height=i}render(t){t.render(this)}clear(t){this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height)}}class n{constructor(t){this.url=t,this.loaded=!1,this.img=new Image}load(){return new Promise((t,i)=>{this.img.onload=(()=>{this.loaded=!0,t()}),this.img.onerror=i,this.img.src=this.url})}getImage(){return this.img}}class l{constructor(){this.ticks=0}tick(t){0===this.ticks&&(t.lvl++,console.log("new level",t.lvl)),this.ticks++>=500&&(this.ticks=0)}}var a=function(t,i,s,e){return new(s||(s=Promise))(function(h,r){function o(t){try{n(e.next(t))}catch(t){r(t)}}function c(t){try{n(e.throw(t))}catch(t){r(t)}}function n(t){t.done?h(t.value):new s(function(i){i(t.value)}).then(o,c)}n((e=e.apply(t,i||[])).next())})};class d{constructor(t){this.rootNode=t,this.width=0,this.height=0,this.G=.05,this.lvl=0,this.textures={bird:new n("/assets/plane1.png")},this.tickables=[],this.renderables=[],this.paused=!1,this.tick=this.tick.bind(this),this.resize=this.resize.bind(this),this.click=this.click.bind(this),this.keyDown=this.keyDown.bind(this),(()=>a(this,void 0,void 0,function*(){this.init();try{yield this.preload()}catch(t){}this.tick(0)}))()}init(){this.renderer=new c,this.pipes=new o(d.PIPE_COLOR),this.bird=new e(d.BIRD_COLOR),this.level=new l,this.tickables.push(this.pipes),this.tickables.push(this.bird),this.tickables.push(this.level),this.renderables.push(this.pipes),this.renderables.push(this.bird),this.rootNode.appendChild(this.renderer.canvas),this.resize(),window.addEventListener("resize",this.resize,!1),window.addEventListener("mousedown",this.click,!1),window.addEventListener("keydown",this.keyDown,!1)}preload(){return Promise.all(Object.keys(this.textures).map(t=>this.textures[t].load()))}resize(){const t=this.rootNode.getBoundingClientRect();this.width=t.width,this.height=t.height,this.renderer.setSize(this.width,this.height)}tick(t){requestAnimationFrame(this.tick),this.renderer.clear(d.BG_COLOR),this.processTicks(t),this.processRenders()}processTicks(t){if(!this.paused)for(const i of this.tickables)i.tick(this,t)}processRenders(){for(const t of this.renderables)this.renderer.render(t)}click(){this.dispatch(()=>this.bird.jump())}keyDown(t){t.keyCode;switch(t.keyCode){case 32:this.dispatch(()=>this.bird.jump());break;case 80:this.paused=!this.paused}}dispatch(t){this.paused||t()}}d.BG_COLOR="green",d.PIPE_COLOR="black",d.BIRD_COLOR="white",new d(document.getElementById("root"))}]);